---
title: AEM Site
description: 了解如何AEM Site
source-git-commit: 23d6c87b525f0763990166e46f4bd4ac2d6e7cd5
workflow-type: tm+mt
source-wordcount: '2545'
ht-degree: 0%

---


# AEM Site {#id205BE3008SW}

以下选项可用于AEM Site输出：

您可以通过两种方式创建AEM网站预设：

**从Web编辑器中：** 在“存储库”面板中，在“映射视图”中打开DITA映射文件，然后在“输出”选项卡中，选择+图标以创建输出预设，然后从“添加预设”对话框的“类型”下拉菜单中选择AEM Site。在Web编辑器中，配置已在“常规”和“高级”选项卡下进行组织：

**常规**

的 **常规** 选项卡包含以下配置：

- 网站名称
- 输出路径
- 现有输出页面
- 删除孤立网站页面
- 使用\（如果为映射定义了条件\）应用条件
- 使用基线\（如果为映射创建基线\）
- 后生成工作流

**高级**

高级选项卡包含以下配置：

- 清理DITA-OT临时文件
- 为每个主题生成单独的PDF
- 默认使用映射属性

有关详细信息，请参阅 [AEM站点配置](#id231KIM004X1).

**从地图仪表板**

要打开AEM Site的输出预设，请单击资产UI中的DITA映射文件，然后单击输出预设，然后单击AEM Site输出选项。在映射功能板中，单击 **编辑** 更新各种配置，然后单击 **保存**.

>[!TIP]
>
> 请参阅 *AEM网站发布* 最佳实践指南中的部分，以了解有关创建AEM Site输出的最佳实践。

## AEM站点配置 {#id_aem_site_config}

以下选项可用于AEM Site输出：

| AEM Site选项 | 描述 |
| --- | --- |
| 输出类型 | 要生成的输出类型。 要生成响应式AEM网站输出，请选择AEM网站选项。 |
| 设置名称 | 为您创建的AEM网站设置提供一个描述性名称。 例如，您可以指定 *内部客户输出* 或 *最终用户输出*. |
| 网站名称 | 输出存储在AEM存储库中的网站名称。<br><br>将使用此处指定的名称创建AEM存储库中的节点。 如果未指定站点名称，则使用DITA映射文件名创建站点节点。<br><br>您在此处指定的网站名称也用作浏览器选项卡中的标题。<br><br>您还可以在设置网站名称时使用变量。 有关使用变量的更多详细信息，请参阅 [使用变量设置“目标路径”、“网站名称”或“文件名”选项](generate-output-use-variables.md#id18BUG70K05Z). |
| 设计 | 选择要用于生成输出的设计模板。<br><br>有关如何使用自定义设计模板生成输出的详细信息，请联系发布管理员。 |
| 目标路径 | 存储输出的AEM存储库中的路径。 在生成最终输出时，网站名称和目标路径会合并。 例如，如果您将“网站名称”指定为 `user-guide` 和目标路径作为 `/content/output/aem-guides`，则最终输出将在 `/content/output/aem-guides/user-guide` 节点。<br><br>您还可以在设置目标路径时使用变量。 有关使用变量的更多详细信息，请参阅 [使用变量设置“目标路径”、“网站名称”或“文件名”选项](generate-output-use-variables.md#id18BUG70K05Z). |
| 使用 | 选择以下选项之一：<br><br>**未应用**:如果不想对已发布的输出应用任何条件，请选择此选项。<br>**DIAVal文件**:选择DIAVal文件以生成条件化内容。 您可以使用浏览对话框或键入文件路径来选择多个DIAVal文件。 使用文件名旁边的十字图标将其删除。 DIAVal文件将按指定的顺序计算，因此在第一个文件中指定的条件优先于在后续文件中指定的匹配条件。 您可以通过添加或删除文件来维护文件顺序。 如果DIAVal文件被移动到其他位置或被删除，则不会自动从映射仪表板中删除该文件。 如果移动或删除了文件，您需要更新位置。 您可以将鼠标悬停在文件名上，以查看存储文件的AEM存储库中的路径。 只能选择DIAVal文件，如果选择任何其他文件类型，则会显示错误。<br>**条件预设**:从下拉列表中选择条件预设，以在发布输出时应用条件。 如果为DITA映射文件添加了条件，则会显示此选项。 条件设置在DITA映射控制台的条件预设选项卡中可用。 要详细了解条件预设，请参阅 [使用条件预设](generate-output-use-condition-presets.md#id1825FL004PN). |
| 现有输出页面 | 选择 **覆盖内容** 选项来覆盖现有页面中的内容。 此选项只会覆盖页面内容和标题节点下显示的内容。 此选项支持内容的混合发布。 选择此选项可提供一个选项，用于从已发布的输出中选择删除孤立页面。 这也是 *默认* 用于创建AEM Site输出的选项。<br><br>选择 **删除和创建** 选项，以在发布期间强制删除任何现有页面。 此选项会删除页面节点及其内容以及该节点下的所有子页面。 如果您更改了输出预设的设计模板，或者希望删除目标中已存在的任何额外页面，请使用此选项。 |
| 删除孤立网站页面 | 选择 **覆盖内容** 在 **现有输出页面** 设置会显示此选项。 如果选择此选项，则会从已发布的AEM网站中删除所有孤立页面。 要使此功能成功运行，您必须发布整个DITA映射，而不使用增量发布。<br><br>假设您已发布DITA映射，其中包含主题a.dita、b.dita和c.dita。 再次发布映射之前，您从映射中删除了b.dita主题。 现在，如果您选择了此选项，则与b.dita相关的所有内容都将从AEM站点输出中删除，并且仅发布a.dita和c.dita。<br><br>此功能不会删除任何已发布的子映射。 例如，如果父映射包含子映射，而您删除了整个子映射，则不会从已发布的输出中删除子映射内容。 但是，如果从子映射中删除任何主题并重新发布，则从站点输出中删除的主题内容。<br><br>此外，如果存在任何引用的内容，且该内容在重新发布之前被删除，则不会删除引用内容的数据。<br><br>**注意**:输出生成日志中还会捕获有关已删除的孤立页面的信息。 有关访问日志文件的更多信息，请参阅 [查看并检查日志文件](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS). |
| 清理DITA-OT临时文件 | 选择此选项可清除由DITA-OT生成的临时文件。 DITA-OT存储临时文件的位置可在输出生成日志中找到。<br><br>如果您在通过DITA-OT生成输出时遇到错误，可以取消选择此选项以保留临时文件。 然后，可以使用这些文件对输出生成错误进行故障诊断。 |
| 为每个主题生成单独的PDF | 如果选中，则还会为DITA映射中的每个主题创建PDF。 选择此选项时，将显示新的拆分PDF路径选项。<br><br>在拆分PDF路径字段中，指定用于存储为每个主题生成的PDF的路径。<br><br>**注意**:AEM指南使用名为pdfx的DITA-OT插件为每个主题生成PDF。 此插件与现成提供的DITA-OT包捆绑在一起。 您可以根据需要自定义此插件以生成PDF。 如果您使用自定义DITA-OT插件，请确保集成pdfx插件以具有主题级别的PDF生成功能。 |
| 运行后生成工作流 | 选择此选项时，将显示新的“生成后工作流”下拉列表，其中包含在AEM中配置的所有工作流。 您必须选择要在输出生成工作流完成后执行的工作流。 |
| 使用基线 | 如果已为选定的DITA映射创建基线，请选择此选项以指定要发布的版本。<br><br>**重要信息**:当您为AEM站点生成增量输出时，将使用当前版本的文件而不是附加的基线创建输出。<br><br>请参阅 [使用基线](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF) 以了解更多详细信息。 |
| 属性 | 选择要作为元数据处理的属性。 这些属性从DITA映射或书签映射文件的“属性”页中设置。 您从下拉列表中选择的属性列在“属性”字段的下方，并将从下拉列表中删除。<br><br>**注意**:元数据属性区分大小写。<br><br>*如果已选择基线，则属性的值将基于所选基线的版本。<br>* 如果尚未选择基线，则属性的值将基于最新版本。<br><br>您还可以使用DITA-OT发布将元数据传递到输出。 有关更多详细信息，请参阅 [使用DITA-OT将元数据传递到输出](pass-metadata-dita-ot.md#id21BJ00QD0XA).<br><br>**注意**:如果您尚未定义 `cq:tags` （在“属性”选项中）， `cq:tags` 即使您选择了要发布的基线，也会从当前工作副本中选取该基线。 |
| 如果主题中缺少映射属性，则使用映射属性 | 如果选中，则为映射文件定义的属性也会复制到未定义此类属性的主题中。 使用此选项时请考虑以下几点：<br><br>*只能将字符串、日期或长（单个和多值）属性传递到AEM网站页面。<br>* 字符串类型属性的元数据值不支持任何特殊字符(例如 `@, #, " "`)。<br>*此选项应与 `Properties` 选项。 |

## AEM Site上的其他说明

### 从Web编辑器生成基于文章的输出

您可以为一个或多个主题生成AEM站点输出，或从Web编辑器生成整个DITA映射。 您需要为DITA映射创建输出预设，然后便可以轻松地为映射生成AEM Site输出。 如果您更新了映射中的一些主题，则还可以从Web编辑器中仅为这些主题生成AEM Site输出。 有关更多详细信息，请参阅 [从Web编辑器中基于文章的发布](web-editor-article-publishing.md#id218CK0U019I).

### 从其他映射中生成输出链接主题

很常见的情况是，有大量文档跨多个文件夹和DITA映射进行分布。 发布从不同位置链接的内容会变得极其复杂。 默认情况下，所有链接 `<xref>` 创建时使用 `local` `@scope`. 发布此类主题不会遇到任何问题，因为它使用指向该主题的直接链接。 如果主题在当前DITA映射之外，则链接不显示链接的内容。

链接内容的另一种方式是使用 `peer` `@scope`. 对于此类内容，在运行时通过从DITA映射的发布上下文中选取链接主题的配置上下文来解析链接。 以下屏幕截图显示了具有 `peer` `@scope`:

![](images/peer-link-scope-link.png){width="800" align="left"}

为了简化复杂映射和主题的发布过程，这些主题链接到其他映射中的其他主题，AEM指南允许您为每个输出预设设置发布上下文。

发布上下文允许您指定发布特定输出时必须从哪个映射中使用哪个主题。 让我们通过一个示例来了解这一点 — 假设您有四个文件夹：样本a、样本b、样本c和样本d。每个文件夹都包含一个DITA映射（DITA映射A、DITA映射B、DITA映射C和DITA映射D）。当DITA映射中的主题链接到DITA映射B、C或D中的主题时，将发生交叉映射链接。在以下屏幕截图中，示例概念主题包含指向其他DITA映射一部分文件的链接\（或引用\）。

![](images/sample-concept-link-to-other.png){width="450" align="left"}

现在，当您为包含此主题的映射文件配置AEM Site发布设置时，可以选择发布时所用链接内容的发布上下文。 发布上下文是DITA映射及其输出预设的组合。 输出预设反过来又包含内容的特定版本和条件预设。 DITA映射、输出预设、\（文件\）版本和条件的整个组合定义链接映射的发布上下文。

执行以下步骤以指定交叉链接文件的发布上下文：

1. 打开 **输出预设** 选项卡。

1. 选择 **AEM Site** 输出预设。

   您会获得AEM预设设置和发布上下文选项卡。

   ![](images/aem-site-publish-settings.png){width="800" align="left"}

1. 打开 **发布上下文** 选项卡。

   系统会向您显示一个相关主题列表。 这些主题是从当前映射中的某个主题链接的，但在其他一些DITA映射中可用。

   >[!NOTE]
   >
   > “发布上下文”选项卡显示使用 `peer` `@scope` 仅。 对于链接 `local` `@scope`，则无需指定发布上下文。

   默认情况下，所有链接主题都会选择其最新的输出预设和映射。

   ![](images/default-publish-context.png){width="800" align="left"}

1. 要更改DITA映射和预设的默认选择，请单击 **编辑** \（在主工具栏中\）。

1. 如果要使用映射中每个从属文件最近发布的输出，请选择 **将最近生成的发布上下文用于所有相关主题**.

1. 在 **父映射** 下拉列表中，选择要链接当前映射输出的映射文件。

   选择映射文件时，映射的UUID会显示在父映射UUID列中。 与所选映射关联的输出预设列在父映射的预设列表中。

1. 在 **父映射的预设** 下拉列表中，选择要将当前映射的输出与其链接的输出预设。

1. 为所有相关主题选择所需的映射及其输出预设，然后单击 **完成**.

   相关主题的上下文现已设置完成。 您可以为当前映射生成输出。 有关生成输出的详细信息，请参阅 [从映射控制台为DITA映射生成输出](generate-output-for-a-dita-map.md#).

### 混合发布

AEM指南支持在现有AEM站点中发布DITA内容。 例如，如果您现有站点，则可以使用AEM站点输出仅发布该站点上的DITA内容。 在此过程中，发布过程不会修改现有的非DITA内容。 有关设置站点以仅发布DITA内容的更多信息，请与发布管理员联系。

### 发布 `conref`

如果您使用 `conref` 在您的内容中，该内容将作为普通内容或嵌入内容一起发布，并包含源\（或反向链接\）主题中的内容。 的 `conref` 内容会与主内容一起呈现，且不会为主内容创建单独的网站页面。 当您搜索 `conref`，则仅包含 `conref` 内容会显示在搜索结果中。

>[!NOTE]
>
>如果您为 `conref` 使用AEM指南版本3.5或更低版本的内容时，建议使用 [删除孤立网站页面](#delete-orphan-page-aem-site) 选项。


### 在内容中搜索字符串

您可以在AEM Site输出中搜索字符串。 默认情况下，您只能在标题中搜索字符串。 要在内容或AEM站点输出正文中搜索字符串，请联系您的系统管理员以启用flattening.enabled属性。


<img src="images/aem-output-search.png" alt="搜索AEM Site输出" width="800">

有关更多详细信息，请参阅 *配置AEM Site节点结构的拼合* 安装和配置Adobe Experience Manager指南中的部分。

**父主题：**[&#x200B;了解输出预设](generate-output-understand-presets.md)